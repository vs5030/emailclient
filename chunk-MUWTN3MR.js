import{$ as ee,C as M,D as u,E as v,F as l,G as F,H as j,J as A,K as B,L as q,M as z,R as J,S as K,T as Q,U as W,V as X,W as O,X as Y,Y as I,Z as x,_ as Z,a as D,aa as w,b as k,ba as te,c as N,ca as ie,da as oe,e as V,ea as ne,fa as re,i as P,j as p,k as _,l as C,m as g,n as L,o as b,p as H,q as G,r as U,s as $,t as a,u as f,v as E,w as s,x as r,y as m,z as d}from"./chunk-XN6PGMB5.js";var y=(()=>{let e=class e{constructor(o){this.http=o,this.rootUrl="https://api.angular-email.com"}getEmails(){return this.http.get(this.rootUrl+"/emails")}getEmailContent(o){return this.http.get(this.rootUrl+"/emails/"+o)}sendEmail(o){return this.http.post(this.rootUrl+"/emails",o)}};e.\u0275fac=function(t){return new(t||e)(H(z))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function Ce(i,e){if(i&1&&(r(0,"div",2)(1,"a",3)(2,"div",4)(3,"div",5),l(4),m(),r(5,"p",6),l(6),m()()()()),i&2){let c=e.$implicit;a(),s("routerLink",c.id),a(3),j(" ",c.subject," "),a(2),j(" ",c.from," ")}}var le=(()=>{let e=class e{constructor(o){this.emailService=o,this.emails=[]}ngOnInit(){this.emailService.getEmails().subscribe(o=>{this.emails=o})}};e.\u0275fac=function(t){return new(t||e)(f(y))},e.\u0275cmp=p({type:e,selectors:[["app-email-index"]],decls:2,vars:1,consts:[[1,"ui","celled","list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],["routerLinkActive","active",3,"routerLink"],[1,"content"],[1,"header","trim"],[1,"trim"]],template:function(t,n){t&1&&(r(0,"div",0),E(1,Ce,7,3,"div",1),m()),t&2&&(a(),s("ngForOf",n.emails))},dependencies:[A,W,X],styles:['.item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000}a.active[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}a.active[_ngcontent-%COMP%]:before{content:">";font-size:20px;margin-right:10px}.content[_ngcontent-%COMP%]{width:90%}.trim[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%}']});let i=e;return i})();var T=(()=>{let e=class e{constructor(){this.sendEmail=new P}ngOnInit(){let{to:o,from:t,subject:n,text:S}=this.emailBody;this.emailForm=new ee({to:new w(o,[x.required,x.email]),from:new w({value:t,disabled:!0}),subject:new w(n,[x.required]),text:new w(S,[x.required])})}getFormControl(o){return this.emailForm.get(o)}onSubmit(){this.emailForm.invalid||this.sendEmail.emit(this.emailForm.value)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p({type:e,selectors:[["app-email-form"]],inputs:{emailBody:"emailBody"},outputs:{sendEmail:"sendEmail"},decls:7,vars:5,consts:[[1,"ui","form",3,"formGroup","ngSubmit"],["label","To: ","inputType","email",3,"control"],["label","From: ","inputType","email",3,"control"],["label","Subject: ","inputType","text",3,"control"],["label","Content: ","customControlType","textarea",3,"control"],[1,"ui","button","primary"]],template:function(t,n){t&1&&(r(0,"form",0),u("ngSubmit",function(){return n.onSubmit()}),d(1,"app-input",1)(2,"app-input",2)(3,"app-input",3)(4,"app-input",4),r(5,"button",5),l(6,"Send"),m()()),t&2&&(s("formGroup",n.emailForm),a(),s("control",n.getFormControl("to")),a(),s("control",n.getFormControl("from")),a(),s("control",n.getFormControl("subject")),a(),s("control",n.getFormControl("text")))},dependencies:[ne,te,Z,ie]});let i=e;return i})();function xe(i,e){if(i&1){let c=M();r(0,"app-modal",2),u("dismiss",function(){C(c);let t=v();return g(t.showModal=!1)}),r(1,"div",3),l(2,"Compose"),m(),r(3,"app-email-form",4),u("sendEmail",function(t){C(c);let n=v();return g(n.onSubmit(t))}),m()()}if(i&2){let c=v();a(3),s("emailBody",c.emailBody)}}var pe=(()=>{let e=class e{constructor(o,t){this.authService=o,this.emailService=t,this.showModal=!1,this.emailBody={to:"",from:`${this.authService.username}@angular-email.com`,subject:"",text:"",html:"",id:""}}onSubmit(o){this.emailService.sendEmail(o).subscribe(()=>{this.showModal=!1})}};e.\u0275fac=function(t){return new(t||e)(f(Y),f(y))},e.\u0275cmp=p({type:e,selectors:[["app-email-create"]],decls:3,vars:1,consts:[[1,"ui","button","inverted","primary","fluid",3,"click"],[3,"dismiss",4,"ngIf"],[3,"dismiss"],["modalTitle",""],[3,"emailBody","sendEmail"]],template:function(t,n){t&1&&(r(0,"button",0),u("click",function(){return n.showModal=!0}),l(1,` Compose
`),m(),E(2,xe,4,1,"app-modal",1)),t&2&&(a(2),s("ngIf",n.showModal))},dependencies:[B,I,T],styles:[".ui.primary.button[_ngcontent-%COMP%]{margin-bottom:1rem}"]});let i=e;return i})();var ce=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p({type:e,selectors:[["app-home"]],decls:6,vars:0,consts:[[1,"ui","grid","stackable"],[1,"five","wide","column"],[1,"eleven","wide","column"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1),d(2,"app-email-create")(3,"app-email-index"),m(),r(4,"div",2),d(5,"router-outlet"),m()())},dependencies:[K,le,pe]});let i=e;return i})();var de=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p({type:e,selectors:[["app-placeholder"]],decls:4,vars:0,consts:[[1,"ui","placeholder","segment"],[1,"ui","icon","header"],[1,"envelope","outline","icon"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1),d(2,"i",2),l(3," Select an email to view content "),m()())}});let i=e;return i})();function Se(i,e){if(i&1){let c=M();r(0,"app-modal",2),u("dismiss",function(){C(c);let t=v();return g(t.showModal=!1)}),r(1,"div",3),l(2,"Reply"),m(),r(3,"app-email-form",4),u("sendEmail",function(t){C(c);let n=v();return g(n.onSubmitEmail(t))}),m()()}if(i&2){let c=v();a(3),s("emailBody",c.emailBody)}}var fe=(()=>{let e=class e{constructor(o){this.emailService=o,this.showModal=!1}ngOnChanges(){let o=this.emailBody.text.replace(/\n/gi,`
> `);this.emailBody=k(D({},this.emailBody),{to:this.emailBody.from,from:this.emailBody.to,subject:`RE: ${this.emailBody.subject}`,text:`


------ ${this.emailBody.from} wrote:
> ${o}`})}onSubmitEmail(o){this.emailService.sendEmail(o).subscribe(()=>{this.showModal=!1})}};e.\u0275fac=function(t){return new(t||e)(f(y))},e.\u0275cmp=p({type:e,selectors:[["app-email-reply"]],inputs:{emailBody:"emailBody"},features:[U],decls:3,vars:1,consts:[[1,"ui","button","primary",3,"click"],[3,"dismiss",4,"ngIf"],[3,"dismiss"],["modalTitle",""],[3,"emailBody","sendEmail"]],template:function(t,n){t&1&&(r(0,"button",0),u("click",function(){return n.showModal=!0}),l(1,"Reply"),m(),E(2,Se,4,1,"app-modal",1)),t&2&&(a(2),s("ngIf",n.showModal))},dependencies:[B,I,T]});let i=e;return i})();var ue=(()=>{let e=class e{constructor(o,t){this.route=o,this.emailBody=o.snapshot.data.emailBodyResponse,this.route.data.subscribe(({emailBodyResponse:n})=>{n.status?t.navigateByUrl("/inbox/not-found"):this.emailBody=n})}ngOnInit(){}};e.\u0275fac=function(t){return new(t||e)(f(J),f(Q))},e.\u0275cmp=p({type:e,selectors:[["app-email-show"]],decls:16,vars:5,consts:[[1,"header"],[3,"emailBody"],[1,"ui","divider"],[3,"innerHTML"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div")(2,"h3"),l(3),m(),r(4,"div"),l(5," From: "),r(6,"i"),l(7),m()(),r(8,"div"),l(9," To: "),r(10,"i"),l(11),m()()(),r(12,"div"),d(13,"app-email-reply",1),m()(),d(14,"div",2)(15,"div",3)),t&2&&(a(3),F(n.emailBody.subject),a(4),F(n.emailBody.from),a(4),F(n.emailBody.to),a(2),s("emailBody",n.emailBody),a(2),s("innerHTML",n.emailBody.html,$))},dependencies:[fe],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}"]});let i=e;return i})();var he=i=>{let{emailBodyId:e}=i.params;return G(y).getEmailContent(e).pipe(V(c=>N(c)))};var ve=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p({type:e,selectors:[["app-not-found"]],decls:4,vars:0,consts:[[1,"ui","placeholder","segment"],[1,"ui","icon","header"],[1,"search","icon"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1),d(2,"i",2),l(3," Email not found! "),m()())}});let i=e;return i})();var be=[{path:"",component:ce,children:[{path:"not-found",component:ve},{path:":emailBodyId",component:ue,resolve:{emailBodyResponse:he}},{path:"",component:de}]}],ye=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=_({type:e}),e.\u0275inj=b({imports:[O.forChild(be),O]});let i=e;return i})();var yt=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=_({type:e}),e.\u0275inj=b({imports:[q,ye,re,oe]});let i=e;return i})();export{yt as InboxModule};
